<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>org.clojars.number23_cn.commons-lib.mail documentation</title></head><body><div id="header"><h1><a href="index.html">Commons-lib 0.2.1 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="org.clojars.number23_cn.commons-lib.core.html"><span>org.clojars.number23_cn.commons-lib.core</span></a></li><li><a href="org.clojars.number23_cn.commons-lib.date.html"><span>org.clojars.number23_cn.commons-lib.date</span></a></li><li><a href="org.clojars.number23_cn.commons-lib.io.html"><span>org.clojars.number23_cn.commons-lib.io</span></a></li><li class="current"><a href="org.clojars.number23_cn.commons-lib.mail.html"><span>org.clojars.number23_cn.commons-lib.mail</span></a></li><li><a href="org.clojars.number23_cn.commons-lib.stacktrace.html"><span>org.clojars.number23_cn.commons-lib.stacktrace</span></a></li><li><a href="org.clojars.number23_cn.commons-lib.util.html"><span>org.clojars.number23_cn.commons-lib.util</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="org.clojars.number23_cn.commons-lib.mail.html#var-fill-msg-content"><span>fill-msg-content</span></a></li><li><a href="org.clojars.number23_cn.commons-lib.mail.html#var-sendmail"><span>sendmail</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>org.clojars.number23_cn.commons-lib.mail documentation</h2><pre class="doc"></pre><div class="public" id="var-fill-msg-content"><h3>fill-msg-content</h3><div class="usage"><code>(fill-msg-content text &amp; files)</code></div><pre class="doc">fill message content with text and files,
return java.mail.internet.MimeMultipart</pre></div><div class="public" id="var-sendmail"><h3>sendmail</h3><div class="usage"><code>(sendmail &amp; m)</code></div><pre class="doc">simple sendmail function by smtp protocol,
base on javax.mail, keys:
host, port, user, password,
auth, ssl,
debug,
from, to, cc, bcc,
subject, text, content

if debug is true, debug output, send to bcc only,
from is String, to, cc, and bcc is vec,
if text is setup, send text/plan msg
content is javax.mail.Multipart

usag:

(sendmail
  :host &quot;smtp.gmail.com&quot;
  :user &quot;number23.cn@gmail.com&quot;
  :password &quot;secret_password&quot;
  :port &quot;587&quot;
  :auth true
  :ssl true
  :debug false
  :from &quot;number23.cn@gmail.com&quot;
  :to [&quot;number23.cn@gmail.com&quot;]
  :subject &quot;Sendmail by Clojure&quot;
  :text &quot;Test&quot;)

with Multipart:

(import 'javax.mail.internet.MimeMultipart)
(import 'javax.mail.internet.MimeBodyPart)

(let [mp (MimeMultipart.)
      hp (MimeBodyPart.)]
  (.setContent hp &quot;&lt;H1&gt;Hello Clojure&lt;/H1&gt;&quot; &quot;text/html&quot;)
  (.addBodyPart mp hp)

  (sendmail
    :content mp
    ...))</pre></div></div></body></html>